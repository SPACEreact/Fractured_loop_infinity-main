# TODO: Fractured Loop Major Update Implementation

## Knowledge Collection Complete
- [x] Collected all knowledge files for AI brain upgrade, including story structure, character arcs, subtext, cinematic camera movements, screenplay conventions, archetypes, editing principles, brainstorming techniques, logline/synopsis/plot development, exposure basics, guided build flows, prompt conversion tables, and detailed build questions.

## Implementation Started
- [ ] Follow the VScode Update Guide for BlackboxAI to implement the Quantum Timeline version.

## Phase 1: Foundational Upgrade - From Simple Tool to Expert System
- [x] Update constants.ts with expert knowledge and guided builds
- [ ] Overhaul Guided Builds:
  - Replace simplistic guided build questionnaires with comprehensive, psychologically-driven ones for Storybuild, Shotbuild, Imgbuild, Vidbuild.
  - Implement 7-keyframe emotional structure for Storybuild focusing on "Want vs. Need".
- [ ] AI "Brain" Upgrade:
  - Integrate deep knowledge base covering Narrative Theory, Character Psychology, Cinematography, Editing Theory.
  - Upgrade AI Assistant core system prompt with expert knowledge.
- [ ] Expert Prompt Engineering Logic:
  - Implement Prompt Conversion Tables for target AI models (MidJourney, Sora, Veo, etc.).
  - Enhance Generate function to act as expert prompt engineer.

## Phase 2: Complete Visual & Interaction Overhaul - The "Quantum Timeline"
- [ ] Replace 2D node-graph canvas with horizontal, multi-track timeline.
- [ ] Implement Tracks and Layers:
  - Global tracks (Style, Audio) and primary Scenes track.
  - Layers inside scenes for Character, Shot, Lighting assets.
- [ ] Update Interaction Model:
  - Replace right-click radial menu and abstract connections with drag-and-drop from Asset Library onto timeline and layers.
- [ ] Redesign UI with cinematic aesthetic:
  - Darker, sleeker theme with glows, gradients, cinematic typography.

## Phase 3: Reintegration & Polishing - "Quality of Life" Features
- [ ] Restore and enhance Inspector Panel:
  - Display rich UI elements with expert cinematic options when asset selected.
- [ ] Reimplement Guided Builds:
  - Add "magic wand" icon to AI Assistant to open build menu and start step-by-step workflows.
- [ ] Ensure core AI-powered workflows functional in new UI:
  - Iterative generation tweaks, style seeding, project pulse, AI tree generation.
- [ ] Add essential UI elements:
  - "Exit Project" button, tooltips on timeline assets, tabbed User Guide.
- [ ] Improve Onboarding Clarity:
  - Add explanatory section on Welcome Screen about "Three Ways to Create".

## Current Pending Tasks from Existing TODOs
- [ ] Organize ASSET_TEMPLATES into categories: primary, secondary, tertiary.
- [ ] Update AssetLibraryPanel with collapsible folders.
- [ ] Enhance NodeDetailsPanel to parse content into fields with smart UI.
- [ ] Add sidebar options panel for primary nodes.
- [ ] Create secondary and tertiary question banks.
- [ ] Ensure chat-generated nodes maintain question visibility.
- [ ] Make system modular for future additions.

## Next Steps
- Review and plan detailed implementation for each phase.
- Prioritize foundational AI and guided build upgrades.
- Plan UI timeline and interaction overhaul.
- Implement reintegration and polishing features.
- Test thoroughly after each major change.
